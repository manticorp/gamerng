!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.GameRng=t():e.GameRng=t()}(this,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>H});var r,n,s=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},i=function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};const a=(e,t="Assertion failed")=>{if(!e)throw new o(t)};class o extends Error{}class h{constructor(e,t="numbers"){r.set(this,[]),this.name="numbers",this.numbers=e,this.name=t}get numbers(){return s(this,r,"f")}set numbers(e){for(const t of e)a("number"==typeof t,`Non-number passed to validator ${t}`);i(this,r,e,"f")}all(e){return this.numbers=e,this}validate(e){return Array.isArray(e)?this.all(e):new u(e)}varname(e){return this.name=e,this}sum(){return this.numbers.reduce(((e,t)=>e+t),0)}sumcloseto(e,t=1e-4,r){return a(Math.abs(this.sum()-e)<t,null!=r?r:`Expected sum of ${this.name} to be within ${t} of ${e}, got ${this.sum()}`),this}sumto(e,t){return a(this.sum()===e,null!=t?t:`Expected sum of ${this.name} to be equal to ${e}, got ${this.sum()}`),this}sumtolt(e,t){return a(this.sum()<e,null!=t?t:`Expected sum of ${this.name} to be less than ${e}, got ${this.sum()}`),this}sumtogt(e,t){return a(this.sum()>e,null!=t?t:`Expected sum of ${this.name} to be greater than ${e}, got ${this.sum()}`),this}sumtolteq(e,t){return a(this.sum()<=e,null!=t?t:`Expected sum of ${this.name} to be less than or equal to ${e}, got ${this.sum()}`),this}sumtogteq(e,t){return a(this.sum()>=e,null!=t?t:`Expected sum of ${this.name} to be greater than or equal to ${e}, got ${this.sum()}`),this}int(e){return this.numbers.forEach((t=>c(t).int(null!=e?e:`Expected every component of ${this.name} to be an integer, got ${t}`))),this}positive(e){return this.numbers.forEach((t=>c(t).positive(null!=e?e:`Expected every component of ${this.name} to be postiive, got ${t}`))),this}negative(e){return this.numbers.forEach((t=>c(t).negative(null!=e?e:`Expected every component of ${this.name} to be negative, got ${t}`))),this}between(e,t,r){return this.numbers.forEach((n=>c(n).between(e,t,null!=r?r:`Expected every component of ${this.name} to be between ${e} and ${t}, got ${n}`))),this}betweenEq(e,t,r){return this.numbers.forEach((n=>c(n).betweenEq(e,t,null!=r?r:`Expected every component of ${this.name} to be between or equal to ${e} and ${t}, got ${n}`))),this}gt(e,t){return this.numbers.forEach((r=>c(r).gt(e,null!=t?t:`Expected every component of ${this.name} to be > ${e}, got ${r}`))),this}gteq(e,t){return this.numbers.forEach((r=>c(r).gteq(e,null!=t?t:`Expected every component of ${this.name} to be >= ${e}, got ${r}`))),this}lt(e,t){return this.numbers.forEach((r=>c(r).lt(e,null!=t?t:`Expected every component of ${this.name} to be < ${e}, got ${r}`))),this}lteq(e,t){return this.numbers.forEach((r=>c(r).lteq(e,null!=t?t:`Expected every component of ${this.name} to be <= ${e}, got ${r}`))),this}}r=new WeakMap;class u{constructor(e=0,t="number"){n.set(this,void 0),this.name="number",this.number=e,this.name=t}get number(){return s(this,n,"f")}set number(e){a("number"==typeof e,`Non-number passed to validator ${e}`),i(this,n,e,"f")}all(e,t){return new h(e,null!=t?t:this.name)}assertNumber(e){return a(void 0!==this.number,"No number passed to validator."),!0}varname(e){return this.name=e,this}validate(e){return Array.isArray(e)?this.all(e):(this.number=e,this)}int(e){return this.assertNumber(this.number)&&a(Number.isInteger(this.number),null!=e?e:`Expected ${this.name} to be an integer, got ${this.number}`),this}positive(e){return this.gt(0,null!=e?e:`Expected ${this.name} to be positive, got ${this.number}`)}negative(e){return this.lt(0,null!=e?e:`Expected ${this.name} to be negative, got ${this.number}`)}between(e,t,r){return this.assertNumber(this.number)&&a(this.number>e&&this.number<t,null!=r?r:`Expected ${this.name} to be between ${e} and ${t}, got ${this.number}`),this}betweenEq(e,t,r){return this.assertNumber(this.number)&&a(this.number>=e&&this.number<=t,null!=r?r:`Expected ${this.name} to be between or equal to ${e} and ${t}, got ${this.number}`),this}gt(e,t){return this.assertNumber(this.number)&&a(this.number>e,null!=t?t:`Expected ${this.name} to be greater than ${e}, got ${this.number}`),this}gteq(e,t){return this.assertNumber(this.number)&&a(this.number>=e,null!=t?t:`Expected ${this.name} to be greater than or equal to ${e}, got ${this.number}`),this}lt(e,t){return this.assertNumber(this.number)&&a(this.number<e,null!=t?t:`Expected ${this.name} to be less than ${e}, got ${this.number}`),this}lteq(e,t){return this.assertNumber(this.number)&&a(this.number<=e,null!=t?t:`Expected ${this.name} to be less than or equal to ${e}, got ${this.number}`),this}}function c(e){if(Array.isArray(e))return new h(e);if("object"==typeof e){const t=Object.keys(e)[0],r=e[t];return Array.isArray(r),c(r).varname(t)}return new u(e)}n=new WeakMap;const l=c;var m,d=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},p=function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};class f extends Error{}class g extends Error{}m=new WeakMap;const b=class{constructor(e=[],t){m.set(this,[]),this.entries=e,this.rng=t||new G}copyArray(e){return Array.from(e)}setEntries(e){return this.entries=e,this}getEntries(){return d(this,m,"f")}set entries(e){p(this,m,this.copyArray(e),"f")}get entries(){return d(this,m,"f")}get length(){return d(this,m,"f").length}setRng(e){return this.rng=e,this}getRng(){return this.rng}add(e){d(this,m,"f").push(e)}empty(){return p(this,m,[],"f"),this}isEmpty(){return this.length<=0}draw(){if(0===this.length)throw new f("No more elements left to draw from in pool.");if(1===this.length)return d(this,m,"f").splice(0,1)[0];const e=this.rng.randInt(0,d(this,m,"f").length-1);return d(this,m,"f").splice(e,1)[0]}drawMany(e){if(e<0)throw new Error("Cannot draw < 0 elements from pool");if(0===this.length&&e>0)throw new f("No more elements left to draw from in pool.");if(this.length<e)throw new g(`Tried to draw ${e} elements from pool with only ${this.length} entries.`);const t=[];for(let r=0;r<e;r++){const e=this.rng.randInt(0,d(this,m,"f").length-1);t.push(d(this,m,"f").splice(e,1)[0])}return t}};class w{constructor(e=1){this.elements=[],Array.isArray(e)?(this.elements=e,this.size=this.elements.length):this.size=e}get length(){return this.elements.length}push(e){if(this.elements.push(e),this.elements.length>this.size)return this.pop()}pop(){return this.elements.pop()}full(){return this.length>=this.size}empty(){this.elements=[]}get(e){return this.elements[e]}allSame(){return!(this.length>0)||this.elements.every((e=>e===this.elements[0]))}}class y extends Error{}class v extends w{constructor(e=1,t=2){if(super(e),this.minsequencelength=2,this.errormessage="Loop detected in input data. Randomness source not random?",this.size>1e4)throw new Error("Cannot detect loops for more than 10000 elements");this.minsequencelength=t}push(e){if(this.detectLoop(),this.elements.push(e),this.elements.length>this.size)return this.pop()}detectLoop(e){this.full()&&(this.allSame()&&this.loopDetected(e),this.hasRepeatingSequence(this.elements,this.minsequencelength)&&this.loopDetected(e))}loopDetected(e){throw new y(null!=e?e:this.errormessage)}hasRepeatingSequence(e,t){for(let r=0;r<e.length;r++)for(let n=r+1;n<e.length;n++){let s=0;for(;n+s<e.length&&e[r+s]===e[n+s];)if(s++,s>t)return!0}return!1}}var M,E,x,N,$,I,_,A,S,T,q=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},k=function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};const j=1e7,O=500,F=5789938451,P=10,R=/^ *([+-]? *[0-9_]*) *[dD] *([0-9_]+) *([+-]? *[0-9_.]*) *$/,z={},C={};class D extends Error{}function L(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)}class W{constructor(e){M.set(this,0),E.set(this,0),x.set(this,0),N.set(this,void 0),$.set(this,void 0),I.set(this,["normal","gaussian","boxMuller","irwinHall","bates","batesgaussian","bernoulli","exponential","pareto","poisson","hypergeometric","rademacher","binomial","betaBinomial","beta","gamma","studentsT","wignerSemicircle","kumaraswamy","hermite","chiSquared","rayleigh","logNormal","cauchy","laplace","logistic"]),this.setSeed(e)}getSeed(){return q(this,M,"f")}sameAs(e){return e instanceof W&&(q(this,M,"f")===q(e,M,"f")&&q(this,N,"f")===q(e,N,"f"))}randomSource(e){return k(this,N,e,"f"),this}getRandomSource(){return q(this,N,"f")}setSeed(e){return null==e?this.setSeed(Math.ceil(1e8*Math.random())):("string"==typeof e&&(e=this.convertStringToNumber(e)),k(this,M,e,"f"),this)}seed(e){return this.setSeed(e),this}serialize(){return{seed:q(this,M,"f")}}static unserialize(e){const{constructor:t}=Object.getPrototypeOf(this),r=new t(e.seed);return r.setSeed(e.seed),r}predictable(e){const{constructor:t}=Object.getPrototypeOf(this);return new t(null!=e?e:F)}static predictable(e){return new this(null!=e?e:F)}hashStr(e){let t,r,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)r=e.charCodeAt(t),n=(n<<5)-n+r,n|=0;return n}convertStringToNumber(e){if(z[e])return z[e];const t=this.hashStr(e);return z[e]=t,t}_random(){return"function"==typeof q(this,N,"f")?q(this,N,"f").call(this):this._next()}percentage(){return this.randBetween(0,100)}probability(){return this.randBetween(0,1)}random(e=0,t=1,r=0){return this.randBetween(e,t,r)}chance(e,t=1){l({chanceIn:t}).positive(),l({n:e}).positive();const r=e/t;return this._random()<=r}chanceTo(e,t){return this.chance(e,e+t)}randInt(e=0,t=1,r=0){if(l({from:e}).int(),l({to:t}).int(),e===t)return e;[e,t]=[Math.min(e,t),Math.max(e,t)];let n=this._random();return n=r<0?1-Math.pow(n,Math.pow(2,r)):Math.pow(n,Math.pow(2,-r)),Math.floor(n*(t+1-e))+e}uniqid(e=""){var t;const r=1e3*Date.now();q(this,x,"f")===r?k(this,E,(t=q(this,E,"f"),++t),"f"):k(this,E,Math.round(100*this._random()),"f");const n=(r+q(this,E,"f")).toString(16).replace(/\./g,"").padEnd(14,"0");return k(this,x,r,"f"),`${e}${n}`}randomString(e=6){l({len:e}).gt(0);const t=[];for(let r=0;r<e;r++)t.push("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[this.randInt(0,61)]);return t.join("")}randBetween(e=0,t,r=0){void 0===t&&(t=e+1),[e,t]=[Math.min(e,t),Math.max(e,t)];let n=this._random();return n=r<0?1-Math.pow(n,Math.pow(2,r)):Math.pow(n,Math.pow(2,-r)),this.scaleNorm(n,e,t)}scale(e,t,r,n=0,s=1){return l({number:e}).lteq(s),l({number:e}).gteq(n),e=(e-n)/(s-n),this.scaleNorm(e,t,r)}scaleNorm(e,t,r){return l({number:e}).betweenEq(0,1),e*(r-t)+t}shouldThrowOnMaxRecursionsReached(e){return"boolean"==typeof e?(k(this,$,e,"f"),this):void 0===q(this,$,"f")||q(this,$,"f")}normal({mean:e,stddev:t,max:r,min:n,skew:s=0}={},i=0){if(void 0===n&&void 0===r)return this.gaussian({mean:e,stddev:t,skew:s});if(i>O&&this.shouldThrowOnMaxRecursionsReached())throw new D(`Max recursive calls to rng normal function. This might be as a result of using predictable random numbers, or inappropriate arguments? Args: ${JSON.stringify({mean:e,stddev:t,max:r,min:n,skew:s})}`);let a=this.bates(7);return a=s<0?1-Math.pow(a,Math.pow(2,s)):Math.pow(a,Math.pow(2,-s)),void 0===e&&void 0===t&&void 0!==r&&void 0!==n?this.scaleNorm(a,n,r):(a=10*a-5,void 0===e?(e=0,void 0!==r&&void 0!==n&&(e=(r+n)/2,void 0===t&&(t=Math.abs(r-n)/10)),void 0===t&&(t=.1),a=a*t+e):(void 0===t&&(t=void 0!==r&&void 0!==n?Math.abs(r-n)/10:.1),a=a*t+e),i<=O&&(void 0!==r&&a>r||void 0!==n&&a<n)?this.normal({mean:e,stddev:t,max:r,min:n,skew:s},i+1):(void 0!==r&&(a=Math.min(a,r)),void 0!==n&&(a=Math.max(a,n)),a))}gaussian({mean:e=0,stddev:t=1,skew:r=0}={}){if(l({stddev:t}).positive(),0===r)return this.boxMuller({mean:e,stddev:t});let n=this.boxMuller({mean:0,stddev:1});return n=n/10+.5,n=r<0?1-Math.pow(n,Math.pow(2,r)):Math.pow(n,Math.pow(2,-r)),n*=10,n-=5,n=n*t+e,n}boxMuller(e=0,t=1){"object"==typeof e&&({mean:e=0,stddev:t=1}=e),l({stddev:t}).gteq(0);const r=1-this._random(),n=this._random();return Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*n)*t+e}irwinHall(e=6){"object"==typeof e&&({n:e=6}=e),l({n:e}).int().positive();let t=0;for(let r=0;r<e;r++)t+=this._random();return t}bates(e=6){return"object"==typeof e&&({n:e=6}=e),l({n:e}).int().positive(),this.irwinHall({n:e})/e}batesgaussian(e=6){return"object"==typeof e&&({n:e=6}=e),l({n:e}).int().gt(1),this.irwinHall({n:e})/Math.sqrt(e)-1/Math.sqrt(1/e)/2}bernoulli(e=.5){return"object"==typeof e&&({p:e=.5}=e),l({p:e}).lteq(1).gteq(0),this._random()<e?1:0}exponential(e=1){return"object"==typeof e&&({rate:e=1}=e),l({rate:e}).gt(0),-Math.log(1-this._random())/e}pareto({shape:e=.5,scale:t=1,location:r=0}={}){l({shape:e}).gteq(0),l({scale:t}).positive();const n=this._random();return 0!==e?r+t/e*(Math.pow(n,-e)-1):r-t*Math.log(n)}poisson(e=1){"object"==typeof e&&({lambda:e=1}=e),l({lambda:e}).positive();const t=Math.exp(-e);let r=0,n=1,s=0;const i=new v(P,2);do{r++;const e=this._random();i.push(e),n*=e,i.detectLoop(`Loop detected in randomly generated numbers over the last 10 generations. This is incompatible with the poisson distribution. Try either using a spread of non-random numbers or fine tune the number to not fall foul of the looped way of generating. Last random number was ${e}`)}while(n>t&&s++<j);if(s+1>=j)throw new Error("LOOP_MAX reached in poisson - bailing out - possible parameter error, or using non-random source?");return r-1}hypergeometric({N:e=50,K:t=10,n:r=5,k:n}={}){function s(e){let t=0;for(let r=2;r<=e;r++)t+=Math.log(r);return t}function i(e,t){return s(e)-s(t)-s(e-t)}l({N:e}).int().positive(),l({K:t}).int().positive().lteq(e),l({n:r}).int().positive().lteq(e),void 0===n&&(n=this.randInt(0,Math.min(t,r))),l({k:n}).int().betweenEq(0,Math.min(t,r));const a=i(t,n)+i(e-t,r-n)-i(e,r);return Math.exp(a)}rademacher(){return this._random()<.5?-1:1}binomial({n:e=1,p:t=.5}={}){l({n:e}).int().positive(),l({p:t}).betweenEq(0,1);let r=0;for(let n=0;n<e;n++)this._random()<t&&r++;return r}betaBinomial({alpha:e=1,beta:t=1,n:r=1}={}){l({alpha:e}).positive(),l({beta:t}).positive(),l({n:r}).int().positive();const n=((e,t)=>{let r=this._random(),n=this._random();return r=Math.pow(r,1/e),n=Math.pow(n,1/t),r/(r+n)})(e,t);let s=0;for(let e=0;e<r;e++)this._random()<n&&s++;return s}beta({alpha:e=.5,beta:t=.5}={}){l({alpha:e}).positive(),l({beta:t}).positive();const r=e=>{let t=0;for(let r=0;r<e;r++){const e=this._random();if(t+=-Math.log(e),r+1>=j)throw new Error("LOOP_MAX reached in beta - bailing out - possible parameter error, or using non-random source?")}return t},n=r(e);return n/(n+r(t))}gamma({shape:e=1,rate:t,scale:r}={}){if(l({shape:e}).positive(),void 0!==r&&void 0!==t&&t!==1/r)throw new Error("Cannot supply rate and scale");let n,s,i,a,o,h;void 0!==r&&(l({scale:r}).positive(),t=1/r),void 0===t&&(t=1),t&&l({rate:t}).positive();let u=1;const c=e-1/3,m=1/Math.sqrt(9*c);let d=0;n=!0;const p=new v(P);for(;n&&d++<j;){let l=0;const d=new v(P);do{o=this.normal(),d.push(o),d.detectLoop("Loop detected in randomly generated numbers over the last 10 generations. This is incompatible with the gamma distribution. Try either using a spread of non-random numbers or fine tune the number to not fall foul ofthe looped way of generating."),u=1+m*o}while(u<=0&&l++<j);if(l+1>=j)throw new Error(`LOOP_MAX reached inside gamma inner loop - bailing out - possible parameter error, or using non-random source? had shape = ${e}, rate = ${t}, scale = ${r}`);u*=Math.pow(u,2),s=Math.pow(o,2),i=1-.331*s*s,a=.5*s+c*(1-u+Math.log(u)),h=this._random(),p.push(h),p.detectLoop(`Loop detected in randomly generated numbers over the last 10 generations. This is incompatible with the gamma distribution. Try either using a spread of non-random numbers or fine tune the number to not fall foul of the looped way of generating. Last random number was ${h}`),(h<i||Math.log(h)<a)&&(n=!1)}if(d+1>=j)throw new Error(`LOOP_MAX reached inside gamma - bailing out - possible parameter error, or using non-random source? had shape = ${e}, rate = ${t}, scale = ${r}`);return t*c*u}studentsT(e=1){"object"==typeof e&&({nu:e=1}=e),l({nu:e}).positive();const t=Math.sqrt(-2*Math.log(this._random()))*Math.cos(2*Math.PI*this._random()),r=this.gamma({shape:e/2,rate:2});return t/Math.sqrt(r/e)}wignerSemicircle(e=1){"object"==typeof e&&({R:e=1}=e),l({R:e}).gt(0);const t=2*this._random()*Math.PI;return e*Math.cos(t)}kumaraswamy({alpha:e=.5,beta:t=.5}={}){l({alpha:e}).gt(0),l({beta:t}).gt(0);const r=this._random();return Math.pow(1-Math.pow(1-r,1/t),1/e)}hermite({lambda1:e=1,lambda2:t=2}={}){l({lambda1:e}).gt(0),l({lambda2:t}).gt(0);return this.poisson({lambda:e})+this.poisson({lambda:t})}chiSquared(e=1){"object"==typeof e&&({k:e=1}=e),l({k:e}).positive().int();let t=0;for(let r=0;r<e;r++){const e=Math.sqrt(-2*Math.log(this._random()))*Math.cos(2*Math.PI*this._random());t+=e*e}return t}rayleigh(e=1){return"object"==typeof e&&({scale:e=1}=e),l({scale:e}).gt(0),e*Math.sqrt(-2*Math.log(this._random()))}logNormal({mean:e=0,stddev:t=1}={}){l({stddev:t}).gt(0);const r=e+t*Math.sqrt(-2*Math.log(this._random()))*Math.cos(2*Math.PI*this._random());return Math.exp(r)}cauchy({median:e=0,scale:t=1}={}){l({scale:t}).gt(0);const r=this._random();return e+t*Math.tan(Math.PI*(r-.5))}laplace({mean:e=0,scale:t=1}={}){l({scale:t}).gt(0);const r=this._random()-.5;return e-t*Math.sign(r)*Math.log(1-2*Math.abs(r))}logistic({mean:e=0,scale:t=1}={}){l({scale:t}).gt(0);const r=this._random();return e+t*Math.log(r/(1-r))}support(e){return{random:"[min, max)",integer:"[min, max]",normal:"(-INF, INF)",boxMuller:"(-INF, INF)",gaussian:"(-INF, INF)",irwinHall:"[0, n]",bates:"[0, 1]",batesgaussian:"(-INF, INF)",bernoulli:"{0, 1}",exponential:"[0, INF)",pareto:"[scale, INF)",poisson:"{1, 2, 3 ...}",hypergeometric:"{max(0, n+K-N), ..., min(n, K)}",rademacher:"{-1, 1}",binomial:"{0, 1, 2, ..., n}",betaBinomial:"{0, 1, 2, ..., n}",beta:"(0, 1)",gamma:"(0, INF)",studentsT:"(-INF, INF)",wignerSemicircle:"[-R; +R]",kumaraswamy:"(0, 1)",hermite:"{0, 1, 2, 3, ...}",chiSquared:"[0, INF)",rayleigh:"[0, INF)",logNormal:"(0, INF)",cauchy:"(-INF, +INF)",laplace:"(-INF, +INF)",logistic:"(-INF, +INF)"}[e]}chancyInt(e){var t;if("number"==typeof e)return Math.round(e);if(Array.isArray(e)){for(const t of e)if(!L(t))throw new Error("Cannot pass non-numbers to chancyInt");let t=this.choice(e);return"number"!=typeof t&&(t=parseFloat(t)),Math.round(t)}if("object"==typeof e){const r=null!==(t=e.type)&&void 0!==t?t:"random";"random"===r?e.type="integer":"normal"===r&&(e.type="normal_integer")}return Math.round(this.chancy(e))}chancy(e,t=0){var r,n;if(t>=O){if(this.shouldThrowOnMaxRecursionsReached())throw new D("Max recursions reached in chancy. Usually a case of badly chosen min/max values.");return 0}if(Array.isArray(e))return this.choice(e);if("string"==typeof e)return this.dice(e);if("object"==typeof e){switch(e.type=null!==(r=e.type)&&void 0!==r?r:"random","random"!==e.type&&"int"!==e.type&&"integer"!==e.type||void 0!==e.min&&void 0===e.max&&(e.max=Number.MAX_SAFE_INTEGER),e.type){case"random":return this.random(e.min,e.max,e.skew);case"int":case"integer":return this.randInt(e.min,e.max,e.skew);case"normal_integer":case"normal_int":return Math.floor(this.normal(e));case"dice":return this.chancyMinMax(this.dice(null!==(n=e.dice)&&void 0!==n?n:e),e,t);case"rademacher":return this.chancyMinMax(this.rademacher(),e,t);case"normal":case"gaussian":case"boxMuller":case"irwinHall":case"bates":case"batesgaussian":case"bernoulli":case"exponential":case"pareto":case"poisson":case"hypergeometric":case"binomial":case"betaBinomial":case"beta":case"gamma":case"studentsT":case"wignerSemicircle":case"kumaraswamy":case"hermite":case"chiSquared":case"rayleigh":case"logNormal":case"cauchy":case"laplace":case"logistic":return this.chancyMinMax(this[e.type](e),e,t)}throw new Error(`Invalid input type given to chancy: "${e.type}".`)}if("number"==typeof e)return e;throw new Error("Invalid input given to chancy")}chancyMinMax(e,t,r=0){const{min:n,max:s}=t;return r+1>=O&&!this.shouldThrowOnMaxRecursionsReached()?(void 0!==n&&(e=Math.max(n,e)),void 0!==s&&(e=Math.min(s,e)),e):void 0!==n&&e<n||void 0!==s&&e>s?this.chancy(t,r+1):e}chancyMin(e){const{constructor:t}=Object.getPrototypeOf(this);return t.chancyMin(e)}chancyMax(e){const{constructor:t}=Object.getPrototypeOf(this);return t.chancyMax(e)}static chancyMin(e){var t,r,n,s,i,a,o;if(Array.isArray(e)){for(const t of e)if(!L(t))throw new Error("Cannot pass non-numbers to chancyMin array input");return Math.min(...e)}if("string"==typeof e)return this.diceMin(e);if("number"==typeof e)return e;if("object"==typeof e){switch(e.type=null!==(t=e.type)&&void 0!==t?t:"random","random"!==e.type&&"integer"!==e.type||void 0!==e.min&&void 0===e.max&&(e.max=Number.MAX_SAFE_INTEGER),e.type){case"dice":return this.diceMin(e.dice);case"normal":return null!==(r=e.min)&&void 0!==r?r:Number.NEGATIVE_INFINITY;case"normal_integer":return null!==(n=e.min)&&void 0!==n?n:Number.NEGATIVE_INFINITY;case"integer":return null!==(s=e.min)&&void 0!==s?s:0;case"random":return null!==(i=e.min)&&void 0!==i?i:0;case"boxMuller":case"gaussian":case"batesgaussian":case"studentsT":case"cauchy":case"laplace":case"logistic":return Number.NEGATIVE_INFINITY;case"irwinHall":case"bates":case"bernoulli":case"exponential":case"binomial":case"betaBinomial":case"hermite":case"chiSquared":case"rayleigh":return 0;case"pareto":return null!==(a=e.scale)&&void 0!==a?a:1;case"poisson":return 1;case"hypergeometric":const{N:t=50,K:h=10,n:u=5}=e;return Math.max(0,u+h-t);case"rademacher":return-1;case"beta":case"gamma":case"kumaraswamy":case"logNormal":return Number.EPSILON;case"wignerSemicircle":return-1*(null!==(o=e.R)&&void 0!==o?o:10)}throw new Error(`Invalid input type ${e.type}.`)}throw new Error("Invalid input supplied to chancyMin")}static chancyMax(e){var t,r,n,s,i,a,o,h,u;if(Array.isArray(e)){for(const t of e)if(!L(t))throw new Error("Cannot pass non-numbers to chancyMax array input");return Math.max(...e)}if("string"==typeof e)return this.diceMax(e);if("number"==typeof e)return e;if("object"==typeof e){switch(e.type=null!==(t=e.type)&&void 0!==t?t:"random","random"!==e.type&&"integer"!==e.type||void 0!==e.min&&void 0===e.max&&(e.max=Number.MAX_SAFE_INTEGER),e.type){case"dice":return this.diceMax(e.dice);case"normal":return null!==(r=e.max)&&void 0!==r?r:Number.POSITIVE_INFINITY;case"normal_integer":return null!==(n=e.max)&&void 0!==n?n:Number.POSITIVE_INFINITY;case"integer":return null!==(s=e.max)&&void 0!==s?s:1;case"random":return null!==(i=e.max)&&void 0!==i?i:1;case"boxMuller":case"gaussian":case"batesgaussian":case"exponential":case"pareto":case"gamma":case"studentsT":case"chiSquared":case"rayleigh":case"logNormal":case"cauchy":case"laplace":case"logistic":return Number.POSITIVE_INFINITY;case"irwinHall":return null!==(a=e.n)&&void 0!==a?a:6;case"bates":case"bernoulli":case"rademacher":case"beta":case"kumaraswamy":return 1;case"poisson":case"hermite":return Number.MAX_SAFE_INTEGER;case"hypergeometric":const{K:t=10,n:c=5}=e;return Math.min(c,t);case"binomial":return null!==(o=e.n)&&void 0!==o?o:1;case"betaBinomial":return null!==(h=e.n)&&void 0!==h?h:1;case"wignerSemicircle":return null!==(u=e.R)&&void 0!==u?u:10}throw new Error(`Invalid input type ${e.type}.`)}throw new Error("Invalid input supplied to chancyMax")}choice(e){return this.weightedChoice(e)}weights(e){const t=new Map;return e.forEach((function(e){let r=0;t.has(e)&&(r=t.get(e)),t.set(e,r+1)})),t}weightedChoice(e){let t,r=0;if(Array.isArray(e)){if(0===e.length)return null;if(1===e.length)return e[0];const t=this.weights(e),r=this.weightedChoice(t);return t.clear(),r}if(e instanceof Map){if(0===e.size)return null;if(1===e.size)return e.keys().next().value;e.forEach(((e,t)=>{r+=e}))}else{const n=Object.keys(e);if(0===n.length)return null;if(1===n.length)return n[0];for(t in e){if(e[t]<0)throw new Error("Probability cannot be negative");r+=e[t]}}const n=this._random()*r;let s=0;if(e instanceof Map){for(const[t,r]of e)if(s+=r,n<s)return t}else for(t in e)if(s+=e[t],n<s)return t;return t}pool(e){return new b(e,this)}static parseDiceArgs(e=1,t=6,r=0){if(null==e||arguments.length<=0)throw new Error("Dice expects at least one argument");if("string"==typeof e)return this.parseDiceString(e);if("object"==typeof e)if(Array.isArray(e))[e,t,r]=e;else{if(void 0===e.n&&void 0===e.d&&void 0===e.plus)throw new Error("Invalid input given to dice related function - dice object must have at least one of n, d or plus properties.");({n:e=1,d:t=6,plus:r=0}=e)}return l({n:e}).int(`Expected n to be an integer, got ${e}`),l({d:t}).int(`Expected d to be an integer, got ${t}`),{n:e,d:t,plus:r}}parseDiceArgs(e=1,t=6,r=0){const{constructor:n}=Object.getPrototypeOf(this);return n.parseDiceArgs(e)}static parseDiceString(e){if(!C[e]){const t=e.replace(/ +/g,"");if(/^[+-]*[\d.]+$/.test(t))return{n:0,d:0,plus:parseFloat(t)};if(R.test(e)){const r=R.exec(t);null!==r&&(C[e]={n:parseInt(r[1]),d:parseInt(r[2]),plus:parseFloat(r[3])},Number.isNaN(C[e].n)&&(C[e].n=1),Number.isNaN(C[e].d)&&(C[e].d=6),Number.isNaN(C[e].plus)&&(C[e].plus=0))}if(void 0===C[e])throw new Error(`Could not parse dice string ${e}`)}return C[e]}diceMax(e,t,r){const{constructor:n}=Object.getPrototypeOf(this);return n.diceMax(e,t,r)}diceMin(e,t,r){const{constructor:n}=Object.getPrototypeOf(this);return n.diceMin(e,t,r)}static diceMax(e=1,t=6,r=0){return({n:e,d:t,plus:r}=this.parseDiceArgs(e,t,r)),e*t+r}static diceMin(e=1,t=6,r=0){return({n:e,d:t,plus:r}=this.parseDiceArgs(e,t,r)),e+r}diceExpanded(e=1,t=6,r=0){if(({n:e,d:t,plus:r}=this.parseDiceArgs(e,t,r)),"number"==typeof e){let n=e;const s=Math.max(t,0);if(1===t)return{dice:Array(e).fill(t),plus:r,total:e*t+r};if(0===e||0===t)return{dice:[],plus:r,total:r};const i=n<0?-1:1;n*=i;const a={dice:[],plus:r,total:r};for(;n>0;)a.dice.push(i*this.randInt(1,s)),n--;return a.total=function(e,...t){return Array.isArray(e)?e.reduce(((e,t)=>e+t),0):t.reduce(((e,t)=>e+t),0)}(a.dice)+r,a}throw new Error("Invalid arguments given to dice")}dice(e,t,r){return this.diceExpanded(e,t,r).total}parseDiceString(e){const{constructor:t}=Object.getPrototypeOf(this);return t.parseDiceString(e)}clamp(e,t,r){return void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t),e}bin(e,t,r,n){l({val:e}).gt(r).lt(n);const s=n-r;return Math.round((e-r)/s*(t-1))/(t-1)*s+r}}M=new WeakMap,E=new WeakMap,x=new WeakMap,N=new WeakMap,$=new WeakMap,I=new WeakMap;class B extends W{constructor(e){super(e),_.set(this,void 0),A.set(this,0),S.set(this,void 0),T.set(this,0),k(this,_,4294967295,"f"),k(this,T,987654321,"f")}static predictable(e){return new this(null!=e?e:F)}serialize(){return{mask:this.getMask(),seed:this.getSeed(),m_z:this.getMz()}}sameAs(e){return e instanceof B&&(this.getRandomSource()===e.getRandomSource()&&this.getSeed()===e.getSeed()&&this.getMask()===e.getMask()&&this.getMz()===e.getMz())}getMask(){return q(this,_,"f")}getMz(){return q(this,T,"f")}setMask(e){k(this,_,e,"f")}setMz(e){k(this,T,e,"f")}static unserialize(e){const t=new this;return t.setSeed(e.seed),t.setMask(e.mask),t.setMz(e.m_z),t}seed(e){return super.seed(e),k(this,T,987654321,"f"),this}_next(){k(this,T,36969*(65535&q(this,T,"f"))+(q(this,T,"f")>>16)&q(this,_,"f"),"f"),this.setSeed(18e3*(65535&this.getSeed())+(this.getSeed()>>16)&q(this,_,"f"));let e=(q(this,T,"f")<<16)+this.getSeed()&q(this,_,"f");return e/=4294967296,e+.5}}_=new WeakMap,A=new WeakMap,S=new WeakMap,T=new WeakMap;const G=B;const H=G;return t=t.default})()));